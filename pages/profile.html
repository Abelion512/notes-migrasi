<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: blob: https://*.supabase.co; connect-src 'self' https://*.supabase.co wss://*.supabase.co; frame-ancestors 'none'; form-action 'self'; base-uri 'self'; object-src 'none';" />
  <title>Profil â€“ Abelion Notes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/style.css">
</head>

<body class="page-shell">
  <main class="panel" id="profile-panel">
    <header class="panel-header">
      <button type="button" class="ghost-btn" id="back-btn">â† Kembali</button>
      <button type="button" class="ghost-btn" id="version-btn">â„¹ï¸ Version info</button>
    </header>

    <section class="profile-hero">
      <img src="../assets/default-avatar.svg" alt="Foto profil" id="profile-avatar" class="profile-avatar is-empty" />
      <button type="button" class="profile-upload" disabled>Ganti foto (segera)</button>
      <p class="profile-greeting" id="profile-greeting">Selamat datang, username ğŸ‘‹</p>
    </section>

    <div class="profile-meta section-card" aria-live="polite" style="margin-bottom: 20px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px;">
      <div style="display: flex; flex-direction: column;">
        <span style="font-size: 0.75rem; color: var(--text-muted);">Gelar</span>
        <span id="profile-title" style="font-weight: 700;">Explorer</span>
      </div>
      <div style="display: flex; flex-direction: column;">
        <span style="font-size: 0.75rem; color: var(--text-muted);">Tier</span>
        <span id="profile-tier" style="font-weight: 700;">Novice</span>
      </div>
      <div style="display: flex; flex-direction: column;">
        <span style="font-size: 0.75rem; color: var(--text-muted);">Level</span>
        <span id="profile-level" style="font-weight: 700;">Level 1</span>
      </div>
      <div style="display: flex; flex-direction: column;">
        <span style="font-size: 0.75rem; color: var(--text-muted);">XP</span>
        <span id="profile-total-xp" style="font-weight: 700;">500</span>
      </div>
    </div>

    <section class="panel-section">
      <h2>Perkembangan XP</h2>
      <div class="section-card">
        <div class="xp-wrapper">
          <div class="xp-label">
            <span>Progress</span>
            <span id="xp-percent">0%</span>
          </div>
          <div class="xp-bar" aria-hidden="true">
            <span id="xp-bar-fill"></span>
          </div>
          <div class="xp-progress-meta">
            <span id="xp-hint">Tetap semangat, XP akan naik konsisten!</span>
            <span id="xp-counter">0 / 100 XP</span>
            <span id="xp-next">Perlu 100 XP lagi untuk naik level.</span>
            <a href="https://olivx.gitbook.io/abelion-notes/getting-started/claim-exp" id="xp-guide"
              class="xp-guide-link" target="_blank" rel="noopener noreferrer">Panduan klaim XP</a>
          </div>
        </div>
      </div>
      <div class="version-pill" id="profile-version-pill" hidden>
        <strong>Versi</strong>
        <span id="profile-version"></span>
      </div>
    </section>

    <section class="panel-section">
      <h2>Productivity Hub</h2>
      <div class="section-card">
        <canvas id="xp-chart" style="width: 100%; height: 200px;"></canvas>
      </div>
      <div class="section-card" style="margin-top: 12px; display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
        <div style="text-align: center;">
          <div style="font-size: 0.8em; color: var(--text-muted);">Total Catatan</div>
          <div id="total-notes-stat" style="font-size: 1.5em; font-weight: 800;">0</div>
        </div>
        <div style="text-align: center;">
          <div style="font-size: 0.8em; color: var(--text-muted);">Streak</div>
          <div id="streak-stat" style="font-size: 1.5em; font-weight: 800;">0</div>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Badge</h2>
      <div class="section-card">
        <div class="badge-grid" id="badge-grid" aria-live="polite"></div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Kontrol Cepat</h2>
      <div class="profile-actions">
        <button type="button" class="primary-btn" id="edit-profile-btn">Edit Profil</button>
        <button type="button" class="primary-btn secondary" id="settings-btn">Pengaturan</button>
      </div>
    </section>

    <footer class="panel-footer">
      Â© 2025 Abelion Notes. All rights reserved.
    </footer>
  </main>

  <footer class="site-footer">
    <small>Selaraskan profil Anda di semua perangkat.</small>
    <a href="../index.html">Kembali ke beranda</a>
  </footer>

  <nav class="bottom-nav" aria-label="Navigasi utama">
    <div class="bottom-nav-shell">
      <a class="nav-button" href="../index.html" aria-label="Beranda" title="Kembali ke Beranda Utama">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        </span>
        <span class="nav-label">Beranda</span>
      </a>
      <a class="nav-button active" href="profile.html" aria-label="Profil" title="Lihat Profil & Statistik XP">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </span>
        <span class="nav-label">Profil</span>
      </a>
      <a class="nav-button" href="settings.html" aria-label="Pengaturan" title="Konfigurasi Aplikasi & Keamanan">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </span>
        <span class="nav-label">Pengaturan</span>
      </a>
      <a class="nav-button" href="version-info.html" aria-label="Versi" title="Informasi Versi & Changelog">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        </span>
        <span class="nav-label">Versi</span>
      </a>
    </div>
  </nav>

  <!-- XP Rules Modal -->
  <div id="xp-rules-modal" class="xp-modal">
    <div class="xp-modal-content">
      <button class="modal-close" id="xp-rules-close">Ã—</button>
      <div class="xp-modal-header">
        <h3>Cara Dapat XP</h3>
        <p>Kumpulkan XP untuk naik level dan buka badge!</p>
      </div>
      <div class="xp-rules-list">
        <div class="xp-rule-item">
          <span class="xp-rule-icon">ğŸ“…</span>
          <div class="xp-rule-text">
            <strong>Login Harian</strong>
            <span>+15 XP setiap hari</span>
          </div>
        </div>
        <div class="xp-rule-item">
          <span class="xp-rule-icon">ğŸ“</span>
          <div class="xp-rule-text">
            <strong>Buat Catatan</strong>
            <span>+50 XP per catatan baru</span>
          </div>
        </div>
        <div class="xp-rule-item">
          <span class="xp-rule-icon">âœï¸</span>
          <div class="xp-rule-text">
            <strong>Edit Catatan</strong>
            <span>+1 XP per karakter yang diubah</span>
          </div>
        </div>
        <div class="xp-rule-item">
          <span class="xp-rule-icon">ğŸ”¥</span>
          <div class="xp-rule-text">
            <strong>Streak 5 Hari</strong>
            <span>Bonus +150 XP & Double XP Weekend</span>
          </div>
        </div>
        <div class="xp-rule-item">
          <span class="xp-rule-icon">ğŸ</span>
          <div class="xp-rule-text">
            <strong>Hari Spesial</strong>
            <span>Bonus XP besar di tanggal cantik!</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="../js/theme.js"></script>
  <script src="../js/env-loader.js"></script>
  <script src="../js/supabase-client.js"></script>
  <script src="../js/supabase-db.js"></script>
  <script src="../js/utils.js"></script>
  <script src="../js/storage.js"></script>
  <script src="../js/lock-screen.js"></script>
  <script src="../js/gamification.js"></script>
  <script src="../js/profile.js"></script>
</body>

</html>