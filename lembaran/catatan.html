<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: blob: https://*.supabase.co; connect-src 'self' https://*.supabase.co wss://*.supabase.co https://cdn.jsdelivr.net; form-action 'self'; base-uri 'self'; object-src 'none'; frame-ancestors 'none';" />
  <title>Detail Catatan â€“ Lembaga Arsip Digital Abelion</title>
  <link rel="stylesheet" href="../pustaka/gaya/gayanya.css" />
</head>

<body class="page-shell" style="background: var(--pro-bg);">
  <div class="note-editor-dialog" style="max-width: 800px; margin: 0 auto; height: auto; min-height: 100vh;">
    <header class="note-editor-header" style="position: sticky; top: 0; background: var(--pro-bg);">
      <a href="../index.html" class="ghost-btn" style="font-size: 15px; color: var(--pro-text-secondary); text-decoration: none;">
        Tutup
      </a>
      <div style="flex: 1;"></div>
      <button type="submit" form="note-edit-form" class="btn-blue" style="padding: 6px 16px; font-size: 14px; border-radius: 6px;">Simpan</button>
    </header>

    <div id="note-cover-area" style="width: 100%; height: 200px; background: var(--pro-surface); position: relative; overflow: hidden; display: none;">
      <img id="note-cover-img" src="" style="width: 100%; height: 100%; object-fit: cover;">
      <button type="button" id="change-cover-btn" class="ghost-btn" style="position: absolute; bottom: 10px; right: 20px; background: rgba(0,0,0,0.5); color: white; font-size: 12px; border-radius: 4px; padding: 4px 8px;">Ganti Sampul</button>
    </div>

    <div class="note-editor-content" style="padding-top: 20px;">
      <form id="note-edit-form" autocomplete="off">
        <div id="note-icon-area" style="margin-bottom: 20px; position: relative; display: inline-block;">
           <button type="button" id="edit-icon-trigger" style="font-size: 72px; background: none; border: none; cursor: pointer; padding: 0; line-height: 1;">ğŸ“</button>
           <input type="hidden" id="edit-icon" value="ğŸ“">
        </div>

        <div style="margin-bottom: 10px;">
           <input id="edit-label" placeholder="Tambahkan kategori..." maxlength="20" style="border:none; background:none; font-size:13px; color:var(--primary); font-weight:600; outline:none; text-transform:uppercase; letter-spacing:0.5px;">
        </div>

        <input id="edit-title" class="editor-title-input" required maxlength="100" placeholder="Judul Catatan">

        <!-- Notion-style Block Editor (contenteditable) instead of textarea -->
        <div id="edit-content-blocks" class="editor-block-area" contenteditable="true" placeholder="Ketik '/' untuk perintah..."></div>
        <textarea id="edit-content" style="display: none;"></textarea>

        <div id="note-detail-date" style="margin-top: 40px; color: var(--text-muted); font-size: 12px; border-top: 1px solid var(--pro-border); padding-top: 20px;"></div>
      </form>
    </div>

    <!-- Slash Menu -->
    <div id="slash-menu" class="slash-menu hidden">
      <!-- Items will be injected by JS -->
    </div>

    <!-- Notion-style Toolbar -->
    <div id="notion-toolbar" class="editor-toolbar">
      <button type="button" class="toolbar-btn-ios" data-command="h1" title="Heading 1">H1</button>
      <button type="button" class="toolbar-btn-ios" data-command="h2" title="Heading 2">H2</button>
      <button type="button" class="toolbar-btn-ios" data-command="bold" title="Bold"><b>B</b></button>
      <button type="button" class="toolbar-btn-ios" data-command="italic" title="Italic"><i>I</i></button>
      <button type="button" class="toolbar-btn-ios" data-command="list" title="Bullet List">â€¢</button>
      <button type="button" class="toolbar-btn-ios" data-command="check" title="Checklist">âœ“</button>
      <button type="button" class="toolbar-btn-ios" data-command="link" title="Link">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
      </button>
      <button type="button" class="toolbar-btn-ios" data-command="image" title="Image">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg>
      </button>
    </div>
  </div>

  <div id="confirm-modal" class="modal-sheet">
    <div class="modal-content">
      <div style="padding: 20px 16px;">
        <h3 id="confirm-title" style="margin: 0 0 8px; font-size: 17px; font-weight: 600;">Konfirmasi</h3>
        <p id="confirm-message" style="margin: 0; color: var(--text-secondary); font-size: 13px; line-height: 1.4;"></p>
      </div>
      <div class="alert-buttons">
        <button id="confirm-cancel" class="alert-button">Batal</button>
        <button id="confirm-ok" class="alert-button bold danger">Ya</button>
      </div>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/emoji-picker-element@1/index.js"></script>
  <script src="../pustaka/aksara/pemuat.js"></script>
  <script src="../pustaka/aksara/utusan.js"></script>
  <script src="../pustaka/aksara/basisdata.js"></script>
  <script src="../pustaka/aksara/perkakas.js"></script>
  <script src="../pustaka/aksara/brankas.js"></script>
  <script src="../pustaka/aksara/kunci.js"></script>
  <script src="../pustaka/aksara/tangkas.js"></script>
  <script src="../pustaka/aksara/kotak-tulis.js"></script>
  <script src="../pustaka/aksara/catatan.js"></script>
  <script src="../pustaka/aksara/konteks.js"></script>
</body>

</html>