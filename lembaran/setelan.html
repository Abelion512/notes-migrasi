<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://unpkg.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: blob: https://*.supabase.co; connect-src 'self' https://*.supabase.co wss://*.supabase.co https://cdn.jsdelivr.net; form-action 'self'; base-uri 'self'; object-src 'none';" />
  <title>Pengaturan ‚Äì Abelion Notes</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../gaya/gayanya.css" />
  <link rel="manifest" href="../izin.json" />
</head>

<body class="page-shell">
  <main class="panel">
    <header class="panel-header">
      <button type="button" class="ghost-btn" id="settings-back">‚Üê Kembali</button>
      <button type="button" class="ghost-btn" id="settings-version">‚ÑπÔ∏è Version info</button>
    </header>

    <h1 class="panel-title">‚öôÔ∏è Settings</h1>
    <p class="panel-subtitle">Atur preferensi tampilan, navigasi, dan sistem Abelion Notes.</p>

    <section class="panel-section">
      <h2>Tampilan &amp; Bahasa</h2>
      <div class="section-card settings-grid">
        <div class="settings-section">
          <h3>Mode Tema</h3>
          <select id="theme-select" class="input-control">
            <option value="auto">Otomatis (Sistem)</option>
            <option value="light">Terang</option>
            <option value="dark">Gelap</option>
          </select>
        </div>
        <div class="settings-section">
          <h3>Warna Aksen</h3>
          <div id="accent-picker" style="display: flex; gap: 8px; margin-top: 8px;">
            <button class="accent-dot" data-color="#007AFF" style="background: #007AFF; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; cursor: pointer;"></button>
            <button class="accent-dot" data-color="#34C759" style="background: #34C759; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; cursor: pointer;"></button>
            <button class="accent-dot" data-color="#AF52DE" style="background: #AF52DE; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; cursor: pointer;"></button>
            <button class="accent-dot" data-color="#FF9500" style="background: #FF9500; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; cursor: pointer;"></button>
            <button class="accent-dot" data-color="#FF3B30" style="background: #FF3B30; width: 24px; height: 24px; border-radius: 50%; border: 2px solid white; cursor: pointer;"></button>
          </div>
        </div>
        <div class="settings-section">
          <h3>Typography</h3>
          <ul class="settings-items">
            <li>Font Catatan</li>
            <li>Ukuran Font</li>
            <li>Bahasa Antarmuka</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Catatan &amp; Navigasi</h2>
      <div class="section-card settings-grid">
        <div class="settings-section">
          <h3>Preferensi</h3>
          <ul class="settings-items">
            <li>Tampilan Default: Grid / List</li>
            <li>Auto Save: Aktif / Nonaktif</li>
            <li>Shortcut Tombol (jika tersedia)</li>
          </ul>
        </div>
        <div class="settings-section">
          <h3>Produktivitas</h3>
          <ul class="settings-items">
            <li>Reminder menulis: Jam &amp; frekuensi</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Privasi &amp; Data</h2>
      <div class="section-card settings-grid">
        <div class="settings-section">
          <h3>Kontrol Data</h3>
          <p class="settings-items">Simpan catatan Anda secara mandiri.</p>
          <div class="settings-actions" style="display: flex; gap: 8px; flex-wrap: wrap;">
            <select id="export-format" class="input-control" style="width: auto;">
              <option value="json">JSON</option>
              <option value="md">Markdown (ZIP)</option>
              <option value="txt">Plain Text (ZIP)</option>
              <option value="md-single">Markdown (Single File)</option>
              <option value="txt-single">Plain Text (Single File)</option>
              <option value="pdf">PDF</option>
              <option value="xlsx">Excel</option>
              <option value="docx">Word (.docx)</option>
              <option value="png">Image (PNG)</option>
            </select>
            <button type="button" class="btn-blue" id="export-btn">Export</button>
            <label class="ghost-btn" style="cursor: pointer;">
              Import (JSON/MD)
              <input type="file" id="import-json-input" accept=".json,.md,.txt" hidden />
            </label>
          </div>
        </div>
        <div class="settings-section">
          <h3>Keamanan</h3>
          <ul class="settings-items">
            <li>Reset Semua Data</li>
            <li>Hapus Akun</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Enkripsi &amp; Kunci</h2>
      <div class="section-card settings-grid">
        <div class="settings-section">
          <h3>Lapisan Enkripsi</h3>
          <p id="encryption-status" class="settings-items">Memeriksa status...</p>
          <form id="passphrase-form" class="settings-form">
            <label for="passphrase-input">Passphrase baru</label>
            <input id="passphrase-input" type="password" autocomplete="new-password" placeholder="Minimal 8 karakter"
              required />
            <label for="passphrase-confirm">Konfirmasi passphrase</label>
            <input id="passphrase-confirm" type="password" autocomplete="new-password" placeholder="Ulangi passphrase"
              required />
            <p class="settings-hint" id="passphrase-hint">Kata kunci tidak disimpan di server mana pun.</p>
            <button type="submit" class="btn-blue">Aktifkan / Perbarui Enkripsi</button>
          </form>
        </div>
        <div class="settings-section">
          <h3>Kontrol Akses</h3>
          <p class="settings-items">Kunci layar akan muncul saat memuat bila enkripsi aktif.</p>
          <button type="button" class="ghost-btn" id="secure-logout-btn">üîí Kunci &amp; Keluar</button>
        </div>
        <div class="settings-section">
          <h3>Cloud Sync (Supabase)</h3>
          <p class="settings-items">Gunakan cloud untuk sinkronisasi antar perangkat (Opsional).</p>

          <div id="supabase-config-form" style="margin-top: 12px; display: none;">
            <label for="supabase-url">Supabase URL</label>
            <input type="text" id="supabase-url" placeholder="https://xyz.supabase.co" style="width: 100%; margin-bottom: 8px;" />

            <label for="supabase-key">Supabase Anon Key</label>
            <input type="password" id="supabase-key" placeholder="eyJhbGciOiJIUzI1..." style="width: 100%; margin-bottom: 8px;" />

            <button type="button" class="btn-blue" id="save-supabase-config" style="width: 100%; margin-bottom: 12px;">Simpan Konfigurasi</button>

            <div style="background: rgba(0,0,0,0.05); padding: 12px; border-radius: 8px; font-size: 0.85em;">
              <strong>Bantuan:</strong> Belum punya key?
              <a href="#" id="show-supabase-guide" style="color: var(--accent-color);">Lihat Panduan</a>
            </div>
          </div>

          <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin-top: 12px;">
            <input type="checkbox" id="supabase-toggle" style="width: auto;" />
            <span>Aktifkan Sinkronisasi Supabase</span>
          </label>
          <small id="supabase-status-hint">Mencatat hanya di perangkat ini bila dinonaktifkan.</small>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Penyimpanan &amp; Privasi</h2>
      <div class="section-card">
        <h3 style="margin-bottom: 12px; font-weight: 800;">Bagaimana data saya disimpan?</h3>
        <p style="font-size: 0.95rem; line-height: 1.6; color: var(--text-secondary); margin-bottom: 16px;">
          Abelion Notes menggunakan teknologi <strong>IndexedDB</strong>, yaitu basis data di dalam browser Anda yang mampu menampung data dalam jumlah besar (hingga gigabytes). Berbeda dengan LocalStorage yang terbatas (hanya 5MB), IndexedDB memungkinkan Anda menyimpan ribuan catatan tanpa khawatir penuh.
        </p>
        <ul style="list-style: none; padding: 0; display: flex; flex-direction: column; gap: 10px; font-size: 0.9rem;">
          <li style="display: flex; gap: 10px; align-items: flex-start;">
            <span>üõ°Ô∏è</span>
            <div><strong>Privasi Lokal:</strong> Data Anda tidak dikirim ke server mana pun kecuali Anda mengaktifkan Supabase secara manual.</div>
          </li>
          <li style="display: flex; gap: 10px; align-items: flex-start;">
            <span>üîë</span>
            <div><strong>Enkripsi AES-GCM:</strong> Jika enkripsi diaktifkan, data Anda dikunci dengan standar industri sebelum ditulis ke memori perangkat.</div>
          </li>
          <li style="display: flex; gap: 10px; align-items: flex-start;">
            <span>üì∂</span>
            <div><strong>Offline First:</strong> Aplikasi tetap berfungsi penuh meski tanpa koneksi internet.</div>
          </li>
        </ul>
      </div>
    </section>

    <section class="panel-section">
      <h2>Storage Health</h2>
      <div class="section-card storage-health">
        <div class="storage-health-grid">
          <div>
            <div class="storage-health-label">Active Engine</div>
            <div class="storage-health-value" id="storage-engine-label">‚Äî</div>
          </div>
          <div>
            <div class="storage-health-label">Schema</div>
            <div class="storage-health-value" id="storage-schema-label">‚Äî</div>
          </div>
          <div>
            <div class="storage-health-label">Usage</div>
            <div class="storage-health-value" id="storage-usage-label">‚Äî</div>
          </div>
        </div>
        <div class="storage-health-actions">
          <button type="button" class="ghost-btn" id="storage-refresh-btn">‚Üª Refresh</button>
          <button type="button" class="btn-blue" id="storage-vacuum-btn">Vacuum / Cleanup</button>
        </div>
        <div class="storage-health-footnote" id="storage-footnote">Rebuild indexes and purge drafts/cache/logs to keep
          things light.</div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Notifikasi</h2>
      <div class="section-card settings-grid">
        <div class="settings-section">
          <h3>Preferensi Notif</h3>
          <ul class="settings-items">
            <li>Notif motivasi harian</li>
            <li>Notif pengingat menulis</li>
            <li>Push / Email notifikasi</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Pusat Developer (Menuju Native)</h2>
      <div class="section-card">
        <h3 style="margin-bottom: 12px; font-weight: 800;">Ingin menjadikan aplikasi ini Native?</h3>
        <p style="font-size: 0.95rem; line-height: 1.6; color: var(--text-secondary); margin-bottom: 16px;">
          Stack teknologi saat ini (HTML/CSS/JS) sudah sangat optimal untuk gaya iOS. Anda tidak perlu mengubah bahasa pemrograman untuk masuk ke App Store.
        </p>
        <div style="background: var(--surface-alt); padding: 12px; border-radius: 12px; font-size: 0.85em; border: 1px solid var(--border-subtle);">
          <strong>Rekomendasi:</strong> Gunakan <strong>Capacitor</strong> (oleh Ionic) atau <strong>Tauri</strong>.
          <ul style="margin-top: 8px; padding-left: 18px;">
            <li>Pertahankan 100% kode saat ini.</li>
            <li>Akses fitur native (Kamera, Biometrik, Push Notif).</li>
            <li>Build langsung menjadi file .ipa (iOS) atau .apk (Android).</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="panel-section">
      <h2>Aplikasi & Mobile</h2>
      <div class="section-card settings-grid">
        <div class="settings-section">
          <h3>Versi Mobile (APK)</h3>
          <p class="settings-items">Gunakan fitur "Tambah ke Layar Utama" di browser Anda untuk menginstal Abelion sebagai aplikasi (PWA). Ini memberikan pengalaman yang sama dengan APK.</p>
          <button type="button" class="btn-blue" id="install-pwa-btn" style="display: none; width: 100%; margin-top: 10px;">Instal Aplikasi</button>
        </div>
        <div class="settings-section">
          <h3>Informasi</h3>
          <ul class="settings-items">
            <li><span>Versi App</span> <strong id="settings-version-label">‚Äî</strong></li>
            <li><span>Developer</span> <strong>Abelion Lavv</strong></li>
          </ul>
        </div>
      </div>
    </section>

    <footer class="panel-footer">¬© 2025 Abelion Notes. All rights reserved.</footer>
  </main>



  <!-- Supabase Guide Modal -->
  <div id="supabase-guide-modal" class="about-modal" style="display: none;">
    <div class="about-modal-content" style="max-width: 500px; text-align: left;">
      <button class="about-close" id="guide-close">&times;</button>
      <h3 style="margin-bottom: 16px;">Cara Mendapatkan API Key Supabase</h3>
      <ol style="padding-left: 20px; line-height: 1.6;">
        <li>Buat akun di <a href="https://supabase.com" target="_blank">supabase.com</a>.</li>
        <li>Buat Project baru (pilih nama dan password bebas).</li>
        <li>Tunggu project selesai dibuat (1-2 menit).</li>
        <li>Buka menu <strong>Project Settings</strong> (ikon gerigi) > <strong>API</strong>.</li>
        <li>Salin <strong>Project URL</strong> dan masukkan ke kotak URL di atas.</li>
        <li>Salin <strong>anon public</strong> key dan masukkan ke kotak Anon Key di atas.</li>
        <li>Jalankan SQL Schema di menu <strong>SQL Editor</strong> jika sinkronisasi tidak berjalan (hubungi bantuan untuk script SQL).</li>
      </ol>
      <p style="margin-top: 16px; font-size: 0.9em; color: var(--text-secondary);">
        *Data Anda aman. API Key disimpan secara lokal di browser Anda.
      </p>
      <button class="btn-blue" id="guide-ok" style="width: 100%; margin-top: 20px;">Mengerti</button>
    </div>
  </div>

  <nav class="bottom-nav" aria-label="Navigasi utama">
    <div class="bottom-nav-shell">
      <a class="nav-button" href="../index.html" aria-label="Beranda">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
        </span>
        <span class="nav-label">Beranda</span>
      </a>
      <a class="nav-button" href="biodata.html" aria-label="Profil">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        </span>
        <span class="nav-label">Profil</span>
      </a>
      <a class="nav-button active" href="setelan.html" aria-label="Pengaturan">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
        </span>
        <span class="nav-label">Pengaturan</span>
      </a>
      <a class="nav-button" href="riwayat.html" aria-label="Versi">
        <span class="nav-icon">
          <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        </span>
        <span class="nav-label">Versi</span>
      </a>
    </div>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <script src="https://unpkg.com/docx@8.2.2/build/index.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="../aksara/corak.js"></script>
  <script src="../aksara/pemuat.js"></script>
  <script src="../aksara/utusan.js"></script>
  <script src="../aksara/basisdata.js"></script>
  <script src="../aksara/perkakas.js"></script>
  <script src="../aksara/brankas.js"></script>
  <script src="../aksara/kunci.js"></script>
  <script src="../aksara/setelan.js"></script>
</body>

</html>